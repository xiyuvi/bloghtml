{"title":"移动端上拉抽屉效果","slug":"30","date":"2023-11-04T12:10:18.000Z","updated":"2023-11-04T12:10:18.000Z","comments":true,"path":"api/articles/30.json","excerpt":null,"covers":null,"content":"<h3 id=\"移动端抽屉\"><a href=\"#移动端抽屉\" class=\"headerlink\" title=\"移动端抽屉\"></a>移动端抽屉</h3><p>移动端上拉抽屉是一种常见的交互效果，可以在屏幕底部显示一个可拖动的视图，用于展示更多的内容或功能。实现这种效果的代码有多种方式，这里介绍一种基于CSS和JavaScript的demo，代码和演示效果如下。</p>\n<div class=\"note note-primary\">\n            <p>demo仅在移动端有效，pc端无效</p>\n          </div>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>移动端拖住增加元素高度<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">style</span>&gt;</span><span class=\"language-css\"></span><br><span class=\"language-css\">    <span class=\"hljs-selector-id\">#drag-element</span> &#123;</span><br><span class=\"language-css\">      <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100%</span>;</span><br><span class=\"language-css\">      <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">200px</span>;</span><br><span class=\"language-css\">      <span class=\"hljs-attribute\">background-color</span>: <span class=\"hljs-built_in\">rgb</span>(<span class=\"hljs-number\">46</span>, <span class=\"hljs-number\">228</span>, <span class=\"hljs-number\">197</span>);</span><br><span class=\"language-css\">      <span class=\"hljs-attribute\">margin</span>: <span class=\"hljs-number\">50px</span> auto;</span><br><span class=\"language-css\">      <span class=\"hljs-attribute\">position</span>: absolute;</span><br><span class=\"language-css\">      <span class=\"hljs-attribute\">bottom</span>: <span class=\"hljs-number\">0</span>;</span><br><span class=\"language-css\">      <span class=\"hljs-attribute\">max-height</span>: <span class=\"hljs-number\">90%</span>;</span><br><span class=\"language-css\">    &#125;</span><br><span class=\"language-css\">  </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">style</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;drag-element&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\"></span><br><span class=\"language-javascript\">    <span class=\"hljs-keyword\">const</span> element = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&#x27;drag-element&#x27;</span>);</span><br><span class=\"language-javascript\">    <span class=\"hljs-keyword\">let</span> initialTouchPosition;</span><br><span class=\"language-javascript\">    <span class=\"hljs-keyword\">let</span> initialElementHeight;</span><br><span class=\"language-javascript\">    element.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;touchstart&#x27;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">event</span>) =&gt;</span> &#123;</span><br><span class=\"language-javascript\">      initialTouchPosition = event.<span class=\"hljs-property\">touches</span>[<span class=\"hljs-number\">0</span>].<span class=\"hljs-property\">clientY</span>;</span><br><span class=\"language-javascript\">      initialElementHeight = element.<span class=\"hljs-property\">offsetHeight</span>;</span><br><span class=\"language-javascript\">    &#125;);</span><br><span class=\"language-javascript\">    element.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;touchmove&#x27;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">event</span>) =&gt;</span> &#123;</span><br><span class=\"language-javascript\">      <span class=\"hljs-keyword\">const</span> currentTouchPosition = event.<span class=\"hljs-property\">touches</span>[<span class=\"hljs-number\">0</span>].<span class=\"hljs-property\">clientY</span>;</span><br><span class=\"language-javascript\">      <span class=\"hljs-keyword\">const</span> touchDistance = initialTouchPosition - currentTouchPosition;</span><br><span class=\"language-javascript\">      <span class=\"hljs-keyword\">const</span> newElementHeight = initialElementHeight + touchDistance;</span><br><span class=\"language-javascript\">      element.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">height</span> = <span class=\"hljs-string\">`<span class=\"hljs-subst\">$&#123;newElementHeight&#125;</span>px`</span>;</span><br><span class=\"language-javascript\">    &#125;);</span><br><span class=\"language-javascript\">    element.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;touchend&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> &#123;</span><br><span class=\"language-javascript\">      initialTouchPosition = <span class=\"hljs-literal\">null</span>;</span><br><span class=\"language-javascript\">      initialElementHeight = <span class=\"hljs-literal\">null</span>;</span><br><span class=\"language-javascript\">    &#125;);</span><br><span class=\"language-javascript\">  </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span><br></code></pre></td></tr></table></figure>\n<h3 id=\"DEMO\"><a href=\"#DEMO\" class=\"headerlink\" title=\"DEMO\"></a>DEMO</h3><p>示例如下,打开<a href=\"https://xiyu.pro/demo/move.html\" target=\"_blank\">移动端抽屉DEMO</a>查看</p>\n","more":"<h3 id=\"移动端抽屉\"><a href=\"#移动端抽屉\" class=\"headerlink\" title=\"移动端抽屉\"></a>移动端抽屉</h3><p>移动端上拉抽屉是一种常见的交互效果，可以在屏幕底部显示一个可拖动的视图，用于展示更多的内容或功能。实现这种效果的代码有多种方式，这里介绍一种基于CSS和JavaScript的demo，代码和演示效果如下。</p>\n<div class=\"note note-primary\">\n            <p>demo仅在移动端有效，pc端无效</p>\n          </div>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>移动端拖住增加元素高度<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">style</span>&gt;</span><span class=\"language-css\"></span><br><span class=\"language-css\">    <span class=\"hljs-selector-id\">#drag-element</span> &#123;</span><br><span class=\"language-css\">      <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100%</span>;</span><br><span class=\"language-css\">      <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">200px</span>;</span><br><span class=\"language-css\">      <span class=\"hljs-attribute\">background-color</span>: <span class=\"hljs-built_in\">rgb</span>(<span class=\"hljs-number\">46</span>, <span class=\"hljs-number\">228</span>, <span class=\"hljs-number\">197</span>);</span><br><span class=\"language-css\">      <span class=\"hljs-attribute\">margin</span>: <span class=\"hljs-number\">50px</span> auto;</span><br><span class=\"language-css\">      <span class=\"hljs-attribute\">position</span>: absolute;</span><br><span class=\"language-css\">      <span class=\"hljs-attribute\">bottom</span>: <span class=\"hljs-number\">0</span>;</span><br><span class=\"language-css\">      <span class=\"hljs-attribute\">max-height</span>: <span class=\"hljs-number\">90%</span>;</span><br><span class=\"language-css\">    &#125;</span><br><span class=\"language-css\">  </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">style</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;drag-element&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\"></span><br><span class=\"language-javascript\">    <span class=\"hljs-keyword\">const</span> element = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&#x27;drag-element&#x27;</span>);</span><br><span class=\"language-javascript\">    <span class=\"hljs-keyword\">let</span> initialTouchPosition;</span><br><span class=\"language-javascript\">    <span class=\"hljs-keyword\">let</span> initialElementHeight;</span><br><span class=\"language-javascript\">    element.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;touchstart&#x27;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">event</span>) =&gt;</span> &#123;</span><br><span class=\"language-javascript\">      initialTouchPosition = event.<span class=\"hljs-property\">touches</span>[<span class=\"hljs-number\">0</span>].<span class=\"hljs-property\">clientY</span>;</span><br><span class=\"language-javascript\">      initialElementHeight = element.<span class=\"hljs-property\">offsetHeight</span>;</span><br><span class=\"language-javascript\">    &#125;);</span><br><span class=\"language-javascript\">    element.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;touchmove&#x27;</span>, <span class=\"hljs-function\">(<span class=\"hljs-params\">event</span>) =&gt;</span> &#123;</span><br><span class=\"language-javascript\">      <span class=\"hljs-keyword\">const</span> currentTouchPosition = event.<span class=\"hljs-property\">touches</span>[<span class=\"hljs-number\">0</span>].<span class=\"hljs-property\">clientY</span>;</span><br><span class=\"language-javascript\">      <span class=\"hljs-keyword\">const</span> touchDistance = initialTouchPosition - currentTouchPosition;</span><br><span class=\"language-javascript\">      <span class=\"hljs-keyword\">const</span> newElementHeight = initialElementHeight + touchDistance;</span><br><span class=\"language-javascript\">      element.<span class=\"hljs-property\">style</span>.<span class=\"hljs-property\">height</span> = <span class=\"hljs-string\">`<span class=\"hljs-subst\">$&#123;newElementHeight&#125;</span>px`</span>;</span><br><span class=\"language-javascript\">    &#125;);</span><br><span class=\"language-javascript\">    element.<span class=\"hljs-title function_\">addEventListener</span>(<span class=\"hljs-string\">&#x27;touchend&#x27;</span>, <span class=\"hljs-function\">() =&gt;</span> &#123;</span><br><span class=\"language-javascript\">      initialTouchPosition = <span class=\"hljs-literal\">null</span>;</span><br><span class=\"language-javascript\">      initialElementHeight = <span class=\"hljs-literal\">null</span>;</span><br><span class=\"language-javascript\">    &#125;);</span><br><span class=\"language-javascript\">  </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span><br></code></pre></td></tr></table></figure>\n<h3 id=\"DEMO\"><a href=\"#DEMO\" class=\"headerlink\" title=\"DEMO\"></a>DEMO</h3><p>示例如下,打开<a href=\"https://xiyu.pro/demo/move.html\" target=\"_blank\">移动端抽屉DEMO</a>查看</p>\n","categories":[{"name":"IT","path":"api/categories/IT.json"}],"tags":[]}