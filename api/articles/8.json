{"title":"ngnix开启HSTS","slug":"8","date":"2020-08-17T07:43:56.000Z","updated":"2020-08-17T07:43:56.000Z","comments":true,"path":"api/articles/8.json","excerpt":null,"covers":null,"content":"<h2 id=\"什么是HSTS\"><a href=\"#什么是HSTS\" class=\"headerlink\" title=\"什么是HSTS\"></a>什么是HSTS</h2><blockquote>\n<p>HTTP严格传输安全协议（英语：HTTP Strict Transport Security，简称：HSTS），是一套由互联网工程任务组发布的互联网安全策略机制。网站可以选择使用HSTS策略，来让浏览器强制使用HTTPS与网站进行通信，以减少会话劫持风险。<br>HSTS可以很大程度上解决SSL剥离攻击，因为只要浏览器曾经与服务器创建过一次安全连接，之后浏览器会强制使用HTTPS，即使链接被换成了HTTP。<br>##开启HSTS证书的前提##<br>正确设置了SSL证书，网站可以通过https协议正常访问<br>##ngnix如何开启HSTS##<br>在网站配置文件server{}中加入</p>\n</blockquote>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs pgsql\">add_header <span class=\"hljs-keyword\">Strict</span>-Transport-<span class=\"hljs-keyword\">Security</span> &quot;max-age=31536000;<br></code></pre></td></tr></table></figure>\n<p>如果追求更好的安全效果可以改成加入</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs pgsql\">add_header <span class=\"hljs-keyword\">Strict</span>-Transport-<span class=\"hljs-keyword\">Security</span> &quot;max-age=31536000; includeSubdomains; preload&quot;;<br><br></code></pre></td></tr></table></figure>\n<h4 id=\"includeSubdomains参数会使得浏览器在请求所有子域名时都强制要求HTTPS协议，如果没有给所有子域名都添加SSL证书的打算，请不要输入这个参数\"><a href=\"#includeSubdomains参数会使得浏览器在请求所有子域名时都强制要求HTTPS协议，如果没有给所有子域名都添加SSL证书的打算，请不要输入这个参数\" class=\"headerlink\" title=\"includeSubdomains参数会使得浏览器在请求所有子域名时都强制要求HTTPS协议，如果没有给所有子域名都添加SSL证书的打算，请不要输入这个参数\"></a>includeSubdomains参数会使得浏览器在请求所有子域名时都强制要求HTTPS协议，如果没有给所有子域名都添加SSL证书的打算，请不要输入这个参数</h4>","more":"<h2 id=\"什么是HSTS\"><a href=\"#什么是HSTS\" class=\"headerlink\" title=\"什么是HSTS\"></a>什么是HSTS</h2><blockquote>\n<p>HTTP严格传输安全协议（英语：HTTP Strict Transport Security，简称：HSTS），是一套由互联网工程任务组发布的互联网安全策略机制。网站可以选择使用HSTS策略，来让浏览器强制使用HTTPS与网站进行通信，以减少会话劫持风险。<br>HSTS可以很大程度上解决SSL剥离攻击，因为只要浏览器曾经与服务器创建过一次安全连接，之后浏览器会强制使用HTTPS，即使链接被换成了HTTP。<br>##开启HSTS证书的前提##<br>正确设置了SSL证书，网站可以通过https协议正常访问<br>##ngnix如何开启HSTS##<br>在网站配置文件server{}中加入</p>\n</blockquote>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs pgsql\">add_header <span class=\"hljs-keyword\">Strict</span>-Transport-<span class=\"hljs-keyword\">Security</span> &quot;max-age=31536000;<br></code></pre></td></tr></table></figure>\n<p>如果追求更好的安全效果可以改成加入</p>\n<figure class=\"highlight pgsql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs pgsql\">add_header <span class=\"hljs-keyword\">Strict</span>-Transport-<span class=\"hljs-keyword\">Security</span> &quot;max-age=31536000; includeSubdomains; preload&quot;;<br><br></code></pre></td></tr></table></figure>\n<h4 id=\"includeSubdomains参数会使得浏览器在请求所有子域名时都强制要求HTTPS协议，如果没有给所有子域名都添加SSL证书的打算，请不要输入这个参数\"><a href=\"#includeSubdomains参数会使得浏览器在请求所有子域名时都强制要求HTTPS协议，如果没有给所有子域名都添加SSL证书的打算，请不要输入这个参数\" class=\"headerlink\" title=\"includeSubdomains参数会使得浏览器在请求所有子域名时都强制要求HTTPS协议，如果没有给所有子域名都添加SSL证书的打算，请不要输入这个参数\"></a>includeSubdomains参数会使得浏览器在请求所有子域名时都强制要求HTTPS协议，如果没有给所有子域名都添加SSL证书的打算，请不要输入这个参数</h4>","categories":[{"name":"IT","path":"api/categories/IT.json"}],"tags":[]}